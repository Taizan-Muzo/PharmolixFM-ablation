# PharmolixFM 已知问题清单

## 🔴 关键功能缺失（影响使用）

### 1. BFN 损失函数未实现
**文件**: `models/pharmolix_fm.py:1009`
**问题**: `forward_pocket_molecule_docking` 和 `forward_structure_based_drug_design` 为空
**影响**: 无法训练模型
**修复难度**: 高（需要理解 BFN 算法）

### 2. 口袋原子解析不完整
**文件**: `data/dataset.py:85`
**问题**: `pocket.atoms = []` 为空列表
**影响**: 口袋特征化无实际数据
**修复难度**: 中（需要 PDB 解析）

### 3. 评估指标缺失
**文件**: `scripts/evaluate.py`
**问题**: RMSD、亲和力等指标未实现
**影响**: 无法评估模型性能
**修复难度**: 中

## 🟡 功能限制（可用但受限）

### 4. 无预训练权重
**问题**: 无法加载 OpenBioMed 的权重
**影响**: 需要从头训练
**临时方案**: 使用 `--use_dummy` 测试

### 5. 推理未完整实现
**文件**: `scripts/inference.py:63`
**问题**: 特征化和推理逻辑未完成
**影响**: 无法实际预测

### 6. 数据下载需手动
**问题**: PDBbind/CrossDocked 需要手动下载
**影响**: 数据准备复杂

## 🟢 代码优化（不影响功能）

### 7. 未使用的导入
**文件**: `models/pharmolix_fm.py:17`
**问题**: `scatter_mean` 导入但未使用

### 8. 缺少类型检查
**问题**: 部分函数缺少类型注解

### 9. 错误处理不完善
**问题**: 部分异常未捕获

## 修复优先级

```
高: 1, 2, 3  →  使训练/评估可用
中: 4, 5, 6  →  使推理/数据可用  
低: 7, 8, 9  →  代码质量
```

## 当前可用功能

✅ 模型架构（可导入）
✅ 虚拟数据训练（测试用）
✅ 数据下载指引
⚠️ 真实数据训练（需实现损失）
❌ 推理预测
❌ 评估指标
